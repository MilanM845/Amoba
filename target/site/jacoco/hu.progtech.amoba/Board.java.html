<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="hu"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Board.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">amoba</a> &gt; <a href="index.source.html" class="el_package">hu.progtech.amoba</a> &gt; <span class="el_source">Board.java</span></div><h1>Board.java</h1><pre class="source lang-java linenums">package hu.progtech.amoba;

import java.util.ArrayList;
import java.util.List;
import java.util.Objects;
import java.util.Random;


public class Board {
    private final int rows;
    private final int cols;
    private final char[][] grid; // ' ' empty, 'X', 'O'

<span class="fc" id="L14">    public Board(int rows, int cols) {</span>
<span class="pc bpc" id="L15" title="4 of 8 branches missed.">        if (cols &lt; 4 || rows &lt; cols || rows &gt; 25 || cols &gt; 25) {</span>
<span class="nc" id="L16">            throw new IllegalArgumentException(&quot;Invalid sizes: require 4 &lt;= M &lt;= N &lt;=25&quot;);</span>
        }
<span class="fc" id="L18">        this.rows = rows;</span>
<span class="fc" id="L19">        this.cols = cols;</span>
<span class="fc" id="L20">        this.grid = new char[rows][cols];</span>
<span class="fc bfc" id="L21" title="All 4 branches covered.">        for (int r = 0; r &lt; rows; r++) for (int c = 0; c &lt; cols; c++) grid[r][c] = ' ';</span>
<span class="fc" id="L22">    }</span>

<span class="nc" id="L24">    public int getRows() { return rows; }</span>
<span class="nc" id="L25">    public int getCols() { return cols; }</span>
<span class="nc" id="L26">    public char at(int r, int c) { return grid[r][c]; }</span>

<span class="pc bpc" id="L28" title="1 of 2 branches missed.">    public boolean isEmpty(int r, int c) { return grid[r][c] == ' '; }</span>

    public boolean place(int r, int c, char p) {
<span class="pc bpc" id="L31" title="2 of 4 branches missed.">        if (!isInside(r, c) || !isEmpty(r, c)) return false;</span>
<span class="fc" id="L32">        grid[r][c] = p;</span>
<span class="fc" id="L33">        return true;</span>
    }

    public boolean isInside(int r, int c) {
<span class="pc bpc" id="L37" title="3 of 8 branches missed.">        return r &gt;= 0 &amp;&amp; r &lt; rows &amp;&amp; c &gt;= 0 &amp;&amp; c &lt; cols;</span>
    }

    public List&lt;int[]&gt; getAllEmpty() {
<span class="nc" id="L41">        List&lt;int[]&gt; res = new ArrayList&lt;&gt;();</span>
<span class="nc bnc" id="L42" title="All 6 branches missed.">        for (int r = 0; r &lt; rows; r++) for (int c = 0; c &lt; cols; c++) if (isEmpty(r,c)) res.add(new int[]{r,c});</span>
<span class="nc" id="L43">        return res;</span>
    }

    public List&lt;int[]&gt; getAdjacentEmpty() {
<span class="nc" id="L47">        boolean[][] ok = new boolean[rows][cols];</span>
<span class="nc bnc" id="L48" title="All 6 branches missed.">        for (int r = 0; r &lt; rows; r++) for (int c = 0; c &lt; cols; c++) if (!isEmpty(r,c)) {</span>
<span class="nc bnc" id="L49" title="All 4 branches missed.">            for (int dr = -1; dr &lt;= 1; dr++) for (int dc = -1; dc &lt;= 1; dc++) {</span>
<span class="nc" id="L50">                int nr = r + dr, nc = c + dc;</span>
<span class="nc bnc" id="L51" title="All 4 branches missed.">                if (isInside(nr, nc) &amp;&amp; isEmpty(nr, nc)) ok[nr][nc] = true;</span>
            }
        }
<span class="nc" id="L54">        List&lt;int[]&gt; res = new ArrayList&lt;&gt;();</span>
<span class="nc bnc" id="L55" title="All 6 branches missed.">        for (int r = 0; r &lt; rows; r++) for (int c = 0; c &lt; cols; c++) if (ok[r][c]) res.add(new int[]{r,c});</span>
<span class="nc" id="L56">        return res;</span>
    }

    public boolean checkWin(char player) {

<span class="fc bfc" id="L61" title="All 4 branches covered.">        for (int r = 0; r &lt; rows; r++) for (int c = 0; c &lt; cols; c++) {</span>
<span class="fc bfc" id="L62" title="All 2 branches covered.">            if (grid[r][c] != player) continue;</span>
<span class="pc bpc" id="L63" title="1 of 2 branches missed.">            if (countDirection(r,c,1,0,player) &gt;= 5) return true;</span>
<span class="fc bfc" id="L64" title="All 2 branches covered.">            if (countDirection(r,c,0,1,player) &gt;= 5) return true;</span>
<span class="pc bpc" id="L65" title="1 of 2 branches missed.">            if (countDirection(r,c,1,1,player) &gt;= 5) return true;</span>
<span class="pc bpc" id="L66" title="1 of 2 branches missed.">            if (countDirection(r,c,1,-1,player) &gt;= 5) return true;</span>
        }
<span class="fc" id="L68">        return false;</span>
    }

    private int countDirection(int r, int c, int dr, int dc, char player) {
<span class="fc" id="L72">        int cnt = 0;</span>
<span class="fc" id="L73">        int rr = r, cc = c;</span>
<span class="fc bfc" id="L74" title="All 4 branches covered.">        while (isInside(rr, cc) &amp;&amp; grid[rr][cc] == player) {</span>
<span class="fc" id="L75">            cnt++; rr += dr; cc += dc;</span>
        }
<span class="fc" id="L77">        return cnt;</span>
    }

    public void printBoard() {

<span class="nc" id="L82">        System.out.print(&quot;   &quot;);</span>
<span class="nc bnc" id="L83" title="All 2 branches missed.">        for (int c = 0; c &lt; cols; c++) System.out.print((char)('a'+c)+&quot; &quot;);</span>
<span class="nc" id="L84">        System.out.println();</span>
<span class="nc bnc" id="L85" title="All 2 branches missed.">        for (int r = 0; r &lt; rows; r++) {</span>
<span class="nc" id="L86">            System.out.printf(&quot;%2d &quot;, r+1);</span>
<span class="nc bnc" id="L87" title="All 4 branches missed.">            for (int c = 0; c &lt; cols; c++) System.out.print(grid[r][c] == ' ' ? &quot;. &quot; : grid[r][c] + &quot; &quot;);</span>
<span class="nc" id="L88">            System.out.println();</span>
        }
<span class="nc" id="L90">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>